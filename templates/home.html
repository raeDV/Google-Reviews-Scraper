{% extends "template.html" %}
{% block title %}{{ super() }} - Home{% endblock %}
{% block content %}

{% for message in get_flashed_messages() %}
<br/>{{ message }}<br/>
{% endfor %}

<!-- User Input Section -->
<form method="POST">
    <label for="place_name">Place Name:</label>
    <input type="text" name="place_name" id="place_name" placeholder="Enter a place name"><br>
    <label for="number_reviews">Number of Reviews:</label>
    <input style="width: 100px" type="text" name="number_reviews" id="number_reviews" placeholder="" value="all"><br><br>
    <button type="submit">Scrape Reviews</button>
    <p style="color: red;">Note: Please double-check the place URL to confirm it's the right place you want to check.</p>
</form>

<!-- Place and General Information Section -->
{% if place_name or overall_rating %}
<h2>Place and General Information</h2>
<div class="result">
    <table>
        <thead>
        <tr>
            <th>Place Name</th>
            <th>Place ID</th>
            <th>Place URL</th>
            <th>Overall Rating</th>
            <th>Total Reviews</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>{{ place_name }}</td>
            <td>{{ place_id }}</td>
            <td>{{ place_url }}</td>
            <td>{{ overall_rating }}</td>
            <td>{{ total_reviews }}</td>
        </tr>
        </tbody>
    </table>
</div>
{% endif %}

<!-- Process Section -->
{% if scraping_progress %}
<p>{{ scraping_progress }}</p>
{% endif %}

<!-- Error Messages Section -->
{% if error_message %}
<p class="error">{{ error_message }}</p>
{% endif %}

<!-- Reviews Section -->
{% if reviews %}
<h2>Reviews:</h2>

<div class="result">
    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Reviewer</th>
            <th>Rating</th>
            <th>Review Time</th>
            <th>Review Content</th>
            <th>Owner Response</th>
        </tr>
        </thead>
        <tbody>
        {% for review in reviews %}
        <tr>
            <td>{{ review.id }}</td>
            <td>{{ review.reviewer }}</td>
            <td>{{ review.rating }}</td>
            <td>{{ review.review_time }}</td>
            <td width="500px">{{ review.review_content }}</td>
            <td>{{ review.owner_response }}</td>
        </tr>
        {% endfor %}
        </tbody>
    </table>
</div>



{% elif no_reviews %}
<p>We found no reviews for this place, please check your input and try again.</p>
{% endif %}

{% endblock %}
