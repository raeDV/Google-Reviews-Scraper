{% extends "template.html" %}
{% block title %}{{ super() }} - All Reviews{% endblock %}
{% block content %}

<!-- Dropdown for sorting options -->
<form action="{{ url_for('sort_reviews') }}" method="GET">
    <label for="sort_option">Sort By:</label>
    <select name="option" id="sort_option">
        <option value="id">ID</option>
        <option value="place_name">Place Name</option>
        <option value="reviewer">Reviewer</option>
        <option value="rating">Rating</option>
        <option value="review_time">Review Time</option>
        <option value="review_content">Review Content</option>
        <option value="owner_response">Owner Response</option>
    </select>
    <label for="sort_order">Order:</label>
    <select name="order" id="sort_order">
        <option value="asc">Ascending</option>
        <option value="desc">Descending</option>
    </select>
    <button type="submit">Sort</button>
</form>

<form action="{{ url_for('delete_reviews') }}" method="POST">

    <!-- Review Table -->
    {% if reviews %}

    <h2>All Reviews:</h2>
    <div class="result">
        <table>
            <thead>
            <tr>
                <th></th>
                <th><a href="{{ url_for('sort_reviews', option='id', order='asc') }}">ID</a></th>
                <th><a href="{{ url_for('sort_reviews', option='place_name', order='asc') }}">Place Name</a></th>
                <th><a href="{{ url_for('sort_reviews', option='reviewer', order='asc') }}">Reviewer</a></th>
                <th><a href="{{ url_for('sort_reviews', option='rating', order='asc') }}">Rating</a></th>
                <th><a href="{{ url_for('sort_reviews', option='review_time', order='asc') }}">Review Time</a></th>
                <th><a href="{{ url_for('sort_reviews', option='review_content', order='asc') }}">Review Content</a></th>
                <th><a href="{{ url_for('sort_reviews', option='owner_response', order='asc') }}">Owner Response</a></th>
            </tr>
            </thead>
            <tbody>
            {% for review in reviews %}
            <tr>
                <td width="30px"><input type="checkbox" name="review_ids" value="{{ review.id }}"></td>
                <td>{{ review.review_id }}</td>
                <td>{{ review.place_name }}</td>
                <td>{{ review.reviewer }}</td>
                <td>{{ review.rating }}</td>
                <td>{{ review.review_time }}</td>
                <td width="500px">{{ review.review_content }}</td>
                <td>{{ review.owner_response }}</td>
            </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
    <button type="submit">Delete Selected</button>
    </br></br>

    {% else %}
    <p>No reviews found.</p>
    {% endif %}
</form>

{% endblock %}
